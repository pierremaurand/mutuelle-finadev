<div class="container">
  <div class="d-flex justify-content-between p-2">
    <h3 class="titre">Les membres</h3>
    <div class="d-flex gap-2">
      @if(agences$ | async; as agences) {
      <div class="row g-3 align-items-center">
        <div class="col-auto">
          <label for="agence" class="col-form-label text-white">Agence</label>
        </div>
        <div class="col-auto">
          <select
            id="agence"
            class="form-select"
            aria-label="Selection des agences"
            [formControl]="agenceCtrl"
          >
            <option value="">Toutes les agences</option>
            @for(agence of agences; track agence.id){
            <option value="{{ agence.id }}">
              {{ agence.nom | uppercase }}
            </option>
            }
          </select>
        </div>
      </div>
      }
      <button class="btn btn-primary" type="button" (click)="add()">
        Ajouter un membre
      </button>
    </div>
  </div>

  <hr />
  <div class="row">
    <div class="col-md-9 liste">
      <div class="row">
        @if(membres$ | async; as membres){ @for(membre of membres| sort :
        ['nom', 'asc']| sort : ['nomAgence', 'asc']; track membre.id) {
        <div class="col-md-6">
          <app-ligne [membre]="membre" (selectedEvent)="onSelected($event)" />
        </div>
        } }
      </div>
    </div>
    <div class="col-md-3">
      @if(selectedMembre) {
      <app-membre-card
        [membre]="selectedMembre"
        [showActions]="true"
        [showEditEd]="true"
        [showViewed]="true"
        (onEditEvent)="onEdited($event)"
        (onViewEvent)="onViewed($event)"
      ></app-membre-card>
      }
    </div>
  </div>
</div>
