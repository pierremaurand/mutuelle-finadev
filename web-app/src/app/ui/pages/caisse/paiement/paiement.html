@if(echeancier$ | async; as echeancier){
<div class="container">
  <div class="d-flex justify-content-between">
    <h5 class="align-content-bottom">Echéance attendues</h5>
    <div class="row g-3 align-items-center">
      <div class="col-auto">
        <label for="date" class="col-form-label">Date échéance</label>
      </div>
      <div class="col-auto">
        <input
          type="date"
          class="form-control"
          id="date"
          name="date"
          [formControl]="datePaiementCtrl"
        />
      </div>
    </div>
  </div>

  <hr />
  <form [formGroup]="request" (ngSubmit)="submitForm()">
    <div class="row">
      <div class="col">
        <div class="card shadow">
          <div class="card-header">
            <div class="row g-3 align-items-center">
              <div class="col-auto">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="checkAll"
                  name="checkAll"
                  (change)="onCheckAll(echeancier, $event)"
                />
              </div>
              <div class="col-auto">
                <label for="checkAll" class="col-form-label"
                  >{{ checkBoxLabel }}</label
                >
              </div>
            </div>
          </div>
          <div class="card-body liste">
            @for(echeance of echeancier; track echeance.id) {
            <app-ligne-echeance
              [item]="{
                echeance: echeance,
                checked: items[$index].checked
              }"
              (onCheckedEvent)="onCheck($event)"
              [showInfosMembre]="true"
            />
            }
          </div>
        </div>
      </div>
    </div>

    <hr />
    <div class="d-flex justify-content-end gap-1">
      <button
        class="btn btn-primary"
        type="submit"
        [disabled]="!request.valid || lines.length === 0"
      >
        <i class="fa-solid fa-floppy-disk"></i> Enregistrer
      </button>
      <button class="btn btn-danger" type="button" (click)="onCancel()">
        <i class="fa-solid fa-xmark"></i> Annuler
      </button>
    </div>
  </form>
</div>
}
