import { Observable } from 'rxjs';
import { IHandshakeRequest, IHubMessage, IMessageHeaders } from './protocol';
import { IMessageSerializer } from './serialization';
export declare enum SignalrConnectionState {
    closed = 0,
    opened = 1,
    closing = 2
}
/**
 * Represents a connection to a SignalR Hub.
 */
export declare class SignalrConnection {
    private readonly serializer;
    private readonly headersFactory?;
    timeout: number;
    get opened(): boolean;
    get state(): Observable<SignalrConnectionState>;
    private subject;
    private lastInvocationId;
    private readonly open$;
    private readonly close$;
    private readonly closing$;
    private $maintenance;
    private $timeout;
    /**
     * Creates new SignalR hub connection.
     *
     * @param url Connection URL.
     * @param serializer Messages serializer.
     */
    constructor(url: string, serializer: IMessageSerializer<IHubMessage | IHandshakeRequest>, headersFactory?: ((method: string, args: unknown[]) => Observable<IMessageHeaders>) | undefined);
    /**
    * Invokes a streaming hub method on the server using the specified name and arguments.
    * The Observable returned by this method resolves when the server indicates it has finished invoking the stream.
    *
    * @param method The name of the server method to invoke.
    * @param args The arguments used to invoke the server method.
    * @returns An Observable that yields results from the server as they are received.
    */
    stream<TItem>(method: string, ...args: unknown[]): Observable<TItem>;
    /**
     * Invokes a hub method on the server using the specified name and arguments.
     * The Observable returned by this method resolves when the server indicates it has finished invoking the method.
     *
     * @param method The name of the server method to invoke.
     * @param args The arguments used to invoke the server method.
     * @returns An Observable with single result from the server.
     */
    invoke<TItem>(method: string, ...args: unknown[]): Observable<TItem>;
    /**
     * Subscribes to invocations with the specified method name.
     *
     * @param method The name of the hub method to define.
     * @returns Invocation's arguments Observable.
     */
    on<TArguments extends Array<unknown>>(method: string): Observable<TArguments>;
    /**
     * Invokes a hub method on the server using the specified name and arguments.
     * Does not wait for a response from the receiver.
     *
     * @param method The name of the server method to invoke.
     * @param args The arguments used to invoke the server method.
     */
    send(method: string, ...args: unknown[]): void;
    /**
     * Closes the connection to hub and terminates subscriptions.
     */
    close(): void;
    private checkOpened;
    private nextInvocationId;
    private getHeaders;
}
